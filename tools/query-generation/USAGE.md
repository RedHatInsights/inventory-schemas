## Script Usage ##
App owners do not have permission to run queries against app-SRE databases. This script is intended for generating SQL query schema that can be submitted to app-SRE. The SQL queries generated by this script can be used to search for matches in `strings`. However, the queries may not be valid for other fields, such as `integers`.

Before you run the script, you need to create a directory called `genereated-yamls` to store the files that would be generated by this script.

To successfully run the script, you need to provide the following parameters:
* `field_name/path` - The name of the field or a path if the field is nested inside an array. For example: `sap_sids` or `network_interfaces/mac_address`
* `field_type` - The type of field. Currently, it can only be `str`, but once we have PostgreSQL 12, it can be one of `str`, `arr`, `nested-arr`, `nested-str`. E.g. it should be `str` for `os_kernel_version`, `arr` for `cpu_flags`, `nested-arr` for `network_interfaces/ipv6_addresses`, `nested-str` for `yum_repos/name`
* `operation` - It can be either `max-length` or `pattern` 
* `value` - An integer for `max-length` or a regex expression for `pattern`
  
Once you know all the parameters you need and have the `genereated-yamls` directory set up, simply run the following command. It will generate a yaml file in your `generated-yamls` folder that you can submit to app-SRE. 

```
python query_gen.py <field_name/path> <field_type> <operation> <value>
```